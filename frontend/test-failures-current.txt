
> frontend@0.1.0 test
> react-scripts test GenericFilter.test.tsx --watchAll=false --no-coverage

FAIL src/components/filters/GenericFilter.test.tsx (5.351 s)
  GenericFilter
    Single-Select Mode
      ÔêÜ renders single-select dropdown with label (73 ms)
      ÔêÜ displays placeholder when no value selected (12 ms)
      ÔêÜ displays selected value (8 ms)
      ÔêÜ calls onChange with selected option when value changes (98 ms)
      ÔêÜ calls onChange with empty array when cleared (77 ms)
      ÔêÜ renders all available options (46 ms)
    Multi-Select Mode
      ÔêÜ renders multi-select menu button with label (14 ms)
      ÔêÜ displays placeholder when no values selected (6 ms)
      ÔêÜ displays single selected value label (4 ms)
      ÔêÜ displays count when multiple values selected (3 ms)
      ÔêÜ opens menu when button clicked (80 ms)
      ÔêÜ toggles selection when option clicked (138 ms)
      ├ù removes selection when already selected option clicked (1089 ms)
      ├ù shows checkboxes for all options (1061 ms)
      ├ù checks selected options (1071 ms)
      ÔêÜ shows "No options available" when options array is empty (78 ms)
    Disabled State
      ├ù disables single-select when disabled prop is true (9 ms)
      ÔêÜ disables multi-select button when disabled prop is true (5 ms)
    Loading State
      ├ù disables single-select when loading (6 ms)
      ÔêÜ disables multi-select button when loading (6 ms)
      ├ù shows spinner in single-select when loading (5 ms)
      ÔêÜ shows spinner in multi-select button when loading (4 ms)
    Error State
      ÔêÜ displays error message in single-select mode (5 ms)
      ÔêÜ displays error message in multi-select mode (4 ms)
      ÔêÜ does not display error when error is null (5 ms)
    Custom Rendering
      ÔêÜ uses custom renderOption in multi-select (81 ms)
      ÔêÜ uses custom getOptionLabel (8 ms)
      ÔêÜ uses custom getOptionValue (70 ms)
    Accessibility
      ÔêÜ has proper ARIA label for single-select (8 ms)
      ÔêÜ has proper ARIA label for multi-select button (7 ms)
      ÔêÜ has proper ARIA attributes for menu (75 ms)
      ÔêÜ has proper role for menu items (64 ms)
      ÔêÜ associates label with form control (5 ms)
    Different Data Types
      ÔêÜ works with string primitives (58 ms)
      ÔêÜ works with number primitives (77 ms)
      ÔêÜ works with complex objects (78 ms)
      ÔêÜ handles objects with label property (4 ms)
      ├ù handles objects with id property (4 ms)
    Size Variants
      ÔêÜ applies small size variant (4 ms)
      ÔêÜ applies medium size variant (default) (4 ms)
      ÔêÜ applies large size variant (2 ms)
    Edge Cases
      ÔêÜ handles empty availableOptions array (4 ms)
      ÔêÜ handles empty values array (4 ms)
      ÔêÜ handles multiple values in single-select mode (uses first) (8 ms)
      ÔêÜ handles value not in availableOptions (7 ms)
      ÔêÜ does not crash with undefined onChange (4 ms)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ removes selection when already selected option clicked

    Found multiple elements with the text: 2024

    Here are the matching elements:

    Ignored nodes: comments, script, style
    <span
      data-truncated="true"
    >
      2024
    </span>

    Ignored nodes: comments, script, style
    <span>
      2024
    </span>

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-close-on-select="false"
            data-menu-open="true"
          >
            <button
              aria-expanded="true"
              aria-haspopup="true"
              aria-label="Years"
              data-size="md"
              style="text-align: left; font-weight: normal; width: 100%;"
            >
              <span
                data-truncated="true"
              >
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              data-max-height="300px"
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      432 |       await user.click(button);
      433 |
    > 434 |       await waitFor(() => {
          |                    ^
      435 |         expect(screen.getByText('2024')).toBeInTheDocument();
      436 |       });
      437 |

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:434:20)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ shows checkboxes for all options

    Unable to find role="checkbox"

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-close-on-select="false"
            data-menu-open="true"
          >
            <button
              aria-expanded="true"
              aria-haspopup="true"
              aria-label="Years"
              data-size="md"
              style="text-align: left; font-weight: normal; width: 100%;"
            >
              <span
                data-truncated="true"
              >
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              data-max-height="300px"
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      458 |       await user.click(button);
      459 |
    > 460 |       await waitFor(() => {
          |                    ^
      461 |         const checkboxes = screen.getAllByRole('checkbox');
      462 |         expect(checkboxes).toHaveLength(stringOptions.length);
      463 |       });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:460:20)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ checks selected options

    Unable to find role="checkbox"

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-close-on-select="false"
            data-menu-open="true"
          >
            <button
              aria-expanded="true"
              aria-haspopup="true"
              aria-label="Years"
              data-size="md"
              style="text-align: left; font-weight: normal; width: 100%;"
            >
              <span
                data-truncated="true"
              >
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              data-max-height="300px"
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  data-width="100%"
                  style="display: flex; gap: 2px;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      480 |       await user.click(button);
      481 |
    > 482 |       await waitFor(() => {
          |                    ^
      483 |         const checkboxes = screen.getAllByRole('checkbox');
      484 |         const checkedCheckboxes = checkboxes.filter((cb) => (cb as HTMLInputElement).checked);
      485 |         expect(checkedCheckboxes).toHaveLength(1);

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:482:20)

  ÔùÅ GenericFilter ÔÇ║ Disabled State ÔÇ║ disables single-select when disabled prop is true

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select aria-label="Year" data-size="md" id="filter-Year" />

      523 |
      524 |       const select = screen.getByRole('combobox');
    > 525 |       expect(select).toBeDisabled();
          |                      ^
      526 |     });
      527 |
      528 |     it('disables multi-select button when disabled prop is true', () => {

      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:525:22)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Loading State ÔÇ║ disables single-select when loading

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select aria-label="Year" data-size="md" id="filter-Year" />

      558 |
      559 |       const select = screen.getByRole('combobox');
    > 560 |       expect(select).toBeDisabled();
          |                      ^
      561 |     });
      562 |
      563 |     it('disables multi-select button when loading', () => {

      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:560:22)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Loading State ÔÇ║ shows spinner in single-select when loading

    TestingLibraryElementError: Unable to find an element by: [data-testid="spinner"]

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="true"
          data-size="md"
        >
          <label
            for="filter-Year"
          >
            Year
          </label>
          <select
            aria-label="Year"
            data-size="md"
            id="filter-Year"
          >
            <option
              value=""
            >
              Select...
            </option>
            <option
              value="2023"
            >
              2023
            </option>
            <option
              value="2024"
            >
              2024
            </option>
            <option
              value="2025"
            >
              2025
            </option>
          </select>
        </div>
      </div>
    </body>

      591 |
      592 |       // Check for spinner by test ID
    > 593 |       expect(screen.getByTestId('spinner')).toBeInTheDocument();
          |                     ^
      594 |     });
      595 |
      596 |     it('shows spinner in multi-select button when loading', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByTestId (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:593:21)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Different Data Types ÔÇ║ handles objects with id property

    TestingLibraryElementError: Value "1" not found in options

    Ignored nodes: comments, script, style
    <select
      aria-label="Objects"
      data-size="md"
      id="filter-Objects"
    >
      <option
        value=""
      >
        Select...
      </option>
      <option
        value="100"
      >
        Option One
      </option>
      <option
        value="200"
      >
        Option Two
      </option>
      <option
        value="300"
      >
        Option Three
      </option>
    </select>

      929 |
      930 |       const select = screen.getByRole('combobox');
    > 931 |       await user.selectOptions(select, '1');
          |                  ^
      932 |
      933 |       expect(onChange).toHaveBeenCalledWith([objectOptions[0]]);
      934 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:39:39
          at Array.map (<anonymous>)
      at Object.selectOptionsBase (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:31:38)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:18:30)
      at node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:45
      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:28)
      at Object.wrapAsync (node_modules/@testing-library/user-event/dist/cjs/setup/wrapAsync.js:8:28)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:26)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:931:18)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

Test Suites: 1 failed, 1 total
Tests:       7 failed, 39 passed, 46 total
Snapshots:   0 total
Time:        6.292 s, estimated 14 s
Ran all test suites matching /GenericFilter.test.tsx/i.
