
> frontend@0.1.0 test
> react-scripts test TemplateUpload.test.tsx --no-coverage --watchAll=false

FAIL src/components/TenantAdmin/TemplateManagement/__tests__/TemplateUpload.test.tsx
  TemplateUpload
    Rendering
      ÔêÜ renders template type selector (36 ms)
      ÔêÜ renders file upload button (35 ms)
      ÔêÜ renders upload button (disabled initially) (11 ms)
      ÔêÜ renders help instructions (6 ms)
    Template Type Selection
      ÔêÜ displays all template type options (80 ms)
      ÔêÜ shows description when template type is selected (75 ms)
      ÔêÜ clears errors when template type changes (139 ms)
    File Upload
      ÔêÜ accepts HTML file selection (11 ms)
      ÔêÜ displays file size (16 ms)
      ÔêÜ rejects non-HTML files (19 ms)
      ÔêÜ rejects files larger than 5MB (184 ms)
      ÔêÜ changes button text after file selection (13 ms)
    Field Mappings
      ÔêÜ validates JSON format (218 ms)
      ÔêÜ accepts valid JSON (96 ms)
      ÔêÜ accepts empty field mappings (65 ms)
      Ôùï skipped hides field mappings by default
      Ôùï skipped shows field mappings when toggled
    Form Validation
      ├ù shows error when uploading without file (1157 ms)
      ├ù shows error when uploading without template type (1075 ms)
      ÔêÜ enables upload button when all required fields are filled (99 ms)
    Upload Submission
      ÔêÜ calls onUpload with correct parameters (163 ms)
      ÔêÜ calls onUpload with field mappings when provided (201 ms)
    Loading and Disabled States
      ÔêÜ disables all inputs when loading (13 ms)
      ÔêÜ disables all inputs when disabled prop is true (14 ms)
      ÔêÜ shows loading text on upload button when loading (9 ms)

  ÔùÅ TemplateUpload ÔÇ║ Form Validation ÔÇ║ shows error when uploading without file

    Unable to find an element with the text: /please select a file/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div>
          <div
            data-invalid="false"
          >
            <label>
              Template Type
            </label>
            <select
              aria-label="Template Type"
            >
              <option
                value=""
              >
                Select template type
              </option>
              <option
                value="str_invoice_nl"
              >
                STR Invoice (Dutch)
              </option>
              <option
                value="str_invoice_en"
              >
                STR Invoice (English)
              </option>
              <option
                value="btw_aangifte"
              >
                BTW Aangifte
              </option>
              <option
                value="aangifte_ib"
              >
                Aangifte IB
              </option>
              <option
                value="toeristenbelasting"
              >
                Toeristenbelasting
              </option>
              <option
                value="financial_report"
              >
                Financial Report
              </option>
            </select>
            <div>
              Short-term rental invoice in Dutch
            </div>
          </div>
          <div
            data-invalid="false"
          >
            <label>
              Template File
            </label>
            <input
              accept=".html,.htm"
              aria-label="Upload HTML template file"
              style="display: none;"
              type="file"
            />
            <div>
              <button>
                Browse Files
              </button>
            </div>
            <div>
              HTML files only, max 5MB
            </div>
          </div>
          <div>
            <button>
              Ôû╝
               Advanced: Field Mappings (Optional)
            </button>
            <div>
              <div
                data-invalid="false"
              >
                <label>
                  Field Mappings (JSON)
                </label>
                <textarea
                  aria-label="Field Mappings (JSON)"
                  placeholder="{\"field_name\": \"custom_value\"}"
                  rows="6"
                >
                  {}
                </textarea>
                <div>
                  Optional: Customize field mappings in JSON format. Leave empty to use defaults.
                </div>
              </div>
            </div>
          </div>
          <button
            disabled=""
          >
            Upload & Preview Template
          </button>
          <div>
            <p
              font-weight="bold"
              mb="2"
            >
              ­ƒôØ Upload Instructions
            </p>
            <div
              color="gray.300"
              font-size="xs"
            >
              <p>
                1. Select the template type from the dropdown
              </p>
              <p>
                2. Choose your HTML template file (max 5MB)
              </p>
              <p>
                3. Optionally configure field mappings
              </p>
              <p>
                4. Click "Upload & Preview Template" to validate
              </p>
            </div>
          </div>
        </div>
      </div>
    </body>

      337 |       await user.click(uploadButton);
      338 |       
    > 339 |       await waitFor(() => {
          |                    ^
      340 |         expect(screen.getByText(/please select a file/i)).toBeInTheDocument();
      341 |       });
      342 |     });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/TenantAdmin/TemplateManagement/__tests__/TemplateUpload.test.tsx:339:20)

  ÔùÅ TemplateUpload ÔÇ║ Form Validation ÔÇ║ shows error when uploading without template type

    Unable to find an element with the text: /please select a template type/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div>
          <div
            data-invalid="false"
          >
            <label>
              Template Type
            </label>
            <select
              aria-label="Template Type"
            >
              <option
                value=""
              >
                Select template type
              </option>
              <option
                value="str_invoice_nl"
              >
                STR Invoice (Dutch)
              </option>
              <option
                value="str_invoice_en"
              >
                STR Invoice (English)
              </option>
              <option
                value="btw_aangifte"
              >
                BTW Aangifte
              </option>
              <option
                value="aangifte_ib"
              >
                Aangifte IB
              </option>
              <option
                value="toeristenbelasting"
              >
                Toeristenbelasting
              </option>
              <option
                value="financial_report"
              >
                Financial Report
              </option>
            </select>
          </div>
          <div
            data-invalid="false"
          >
            <label>
              Template File
            </label>
            <input
              accept=".html,.htm"
              aria-label="Upload HTML template file"
              style="display: none;"
              type="file"
            />
            <div>
              <button>
                Change File
              </button>
              <div
                flex="2"
              >
                <p>
                  template.html
                </p>
                <p>
                  0.03
                   KB
                </p>
              </div>
            </div>
            <div>
              HTML files only, max 5MB
            </div>
          </div>
          <div>
            <button>
              Ôû╝
               Advanced: Field Mappings (Optional)
            </button>
            <div>
              <div
                data-invalid="false"
              >
                <label>
                  Field Mappings (JSON)
                </label>
                <textarea
                  aria-label="Field Mappings (JSON)"
                  placeholder="{\"field_name\": \"custom_value\"}"
                  rows="6"
                >
                  {}
                </textarea>
                <div>
                  Optional: Customize field mappings in JSON format. Leave empty to use defaults.
                </div>
              </div>
            </div>
          </div>
          <button
            disabled=""
          >
            Upload & Preview Template
          </button>
          <div>
            <p
              font-weight="bold"
              mb="2"
            >
              ­ƒôØ Upload Instructions
            </p>
            <div
              color="gray.300"
              font-size="xs"
            >
              <p>
                1. Select the template type from the dropdown
              </p>
              <p>
                2. Choose your HTML template file (max 5MB)
              </p>
              <p>
                3. Optionally configure field mappings
              </p>
              <p>
                4. Click "Upload & Preview Template" to validate
              </p>
            </div>
          </div>
        </div>
      </div>
    </body>

      358 |       await user.click(uploadButton);
      359 |       
    > 360 |       await waitFor(() => {
          |                    ^
      361 |         expect(screen.getByText(/please select a template type/i)).toBeInTheDocument();
      362 |       });
      363 |     });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/TenantAdmin/TemplateManagement/__tests__/TemplateUpload.test.tsx:360:20)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 skipped, 21 passed, 25 total
Snapshots:   0 total
Time:        4.914 s, estimated 5 s
Ran all test suites matching /TemplateUpload.test.tsx/i.
