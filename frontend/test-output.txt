
> frontend@0.1.0 test
> react-scripts test GenericFilter.test.tsx --watchAll=false --no-coverage

FAIL src/components/filters/GenericFilter.test.tsx (7.047 s)
  GenericFilter
    Single-Select Mode
      ÔêÜ renders single-select dropdown with label (115 ms)
      ÔêÜ displays placeholder when no value selected (21 ms)
      ÔêÜ displays selected value (12 ms)
      ÔêÜ calls onChange with selected option when value changes (126 ms)
      ÔêÜ calls onChange with empty array when cleared (87 ms)
      ÔêÜ renders all available options (57 ms)
    Multi-Select Mode
      ÔêÜ renders multi-select menu button with label (18 ms)
      ÔêÜ displays placeholder when no values selected (11 ms)
      ├ù displays single selected value label (16 ms)
      ÔêÜ displays count when multiple values selected (10 ms)
      ÔêÜ opens menu when button clicked (84 ms)
      ÔêÜ toggles selection when option clicked (152 ms)
      ├ù removes selection when already selected option clicked (1081 ms)
      ├ù shows checkboxes for all options (1084 ms)
      ├ù checks selected options (1078 ms)
      ÔêÜ shows "No options available" when options array is empty (81 ms)
    Disabled State
      ├ù disables single-select when disabled prop is true (19 ms)
      ÔêÜ disables multi-select button when disabled prop is true (21 ms)
    Loading State
      ├ù disables single-select when loading (11 ms)
      ÔêÜ disables multi-select button when loading (12 ms)
      ├ù shows spinner in single-select when loading (3 ms)
      ÔêÜ shows spinner in multi-select button when loading (7 ms)
    Error State
      ÔêÜ displays error message in single-select mode (5 ms)
      ÔêÜ displays error message in multi-select mode (7 ms)
      ÔêÜ does not display error when error is null (4 ms)
    Custom Rendering
      ÔêÜ uses custom renderOption in multi-select (76 ms)
      ÔêÜ uses custom getOptionLabel (10 ms)
      ÔêÜ uses custom getOptionValue (84 ms)
    Accessibility
      ÔêÜ has proper ARIA label for single-select (8 ms)
      ÔêÜ has proper ARIA label for multi-select button (16 ms)
      ├ù has proper ARIA attributes for menu (1073 ms)
      ÔêÜ has proper role for menu items (75 ms)
      ÔêÜ associates label with form control (9 ms)
    Different Data Types
      ÔêÜ works with string primitives (70 ms)
      ÔêÜ works with number primitives (77 ms)
      ÔêÜ works with complex objects (81 ms)
      ÔêÜ handles objects with label property (11 ms)
      ├ù handles objects with id property (12 ms)
    Size Variants
      ÔêÜ applies small size variant (5 ms)
      ÔêÜ applies medium size variant (default) (8 ms)
      ÔêÜ applies large size variant (8 ms)
    Edge Cases
      ÔêÜ handles empty availableOptions array (5 ms)
      ÔêÜ handles empty values array (6 ms)
      ÔêÜ handles multiple values in single-select mode (uses first) (10 ms)
      ÔêÜ handles value not in availableOptions (9 ms)
      ÔêÜ does not crash with undefined onChange (4 ms)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ displays single selected value label

    TestingLibraryElementError: Found multiple elements with the text: 2024

    Here are the matching elements:

    Ignored nodes: comments, script, style
    <span>
      2024
    </span>

    Ignored nodes: comments, script, style
    <span>
      2024
    </span>

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-menu-open="false"
          >
            <button
              aria-expanded="false"
              aria-haspopup="true"
              aria-label="Years"
              font-weight="normal"
              width="100%"
            >
              <span>
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      246 |       );
      247 |
    > 248 |       expect(screen.getByText('2024')).toBeInTheDocument();
          |                     ^
      249 |     });
      250 |
      251 |     it('displays count when multiple values selected', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByText (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:248:21)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ removes selection when already selected option clicked

    Found multiple elements with the text: 2024

    Here are the matching elements:

    Ignored nodes: comments, script, style
    <span>
      2024
    </span>

    Ignored nodes: comments, script, style
    <span>
      2024
    </span>

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-menu-open="false"
          >
            <button
              aria-expanded="false"
              aria-haspopup="true"
              aria-label="Years"
              font-weight="normal"
              width="100%"
            >
              <span>
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      329 |       await user.click(button);
      330 |
    > 331 |       await waitFor(() => {
          |                    ^
      332 |         expect(screen.getByText('2024')).toBeInTheDocument();
      333 |       });
      334 |

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:331:20)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ shows checkboxes for all options

    Unable to find role="checkbox"

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-menu-open="false"
          >
            <button
              aria-expanded="false"
              aria-haspopup="true"
              aria-label="Years"
              font-weight="normal"
              width="100%"
            >
              <span>
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      355 |       await user.click(button);
      356 |
    > 357 |       await waitFor(() => {
          |                    ^
      358 |         const checkboxes = screen.getAllByRole('checkbox');
      359 |         expect(checkboxes).toHaveLength(stringOptions.length);
      360 |       });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:357:20)

  ÔùÅ GenericFilter ÔÇ║ Multi-Select Mode ÔÇ║ checks selected options

    Unable to find role="checkbox"

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="false"
          data-size="md"
        >
          <label
            for="filter-Years"
          >
            Years
          </label>
          <div
            data-menu-open="false"
          >
            <button
              aria-expanded="false"
              aria-haspopup="true"
              aria-label="Years"
              font-weight="normal"
              width="100%"
            >
              <span>
                2024
              </span>
              <span
                data-testid="chevron-icon"
              >
                Ôû╝
              </span>
            </button>
            <div
              role="menu"
            >
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2023
                  </span>
                </div>
              </div>
              <div
                aria-checked="true"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    checked=""
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2024
                  </span>
                </div>
              </div>
              <div
                aria-checked="false"
                role="menuitemcheckbox"
              >
                <div
                  style="display: flex;"
                >
                  <input
                    aria-hidden="true"
                    pointer-events="none"
                    readonly=""
                    type="checkbox"
                  />
                  <span>
                    2025
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </body>

      377 |       await user.click(button);
      378 |
    > 379 |       await waitFor(() => {
          |                    ^
      380 |         const checkboxes = screen.getAllByRole('checkbox');
      381 |         const checkedCheckboxes = checkboxes.filter((cb) => (cb as HTMLInputElement).checked);
      382 |         expect(checkedCheckboxes).toHaveLength(1);

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:379:20)

  ÔùÅ GenericFilter ÔÇ║ Disabled State ÔÇ║ disables single-select when disabled prop is true

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select aria-label="Year" id="filter-Year" />

      420 |
      421 |       const select = screen.getByRole('combobox');
    > 422 |       expect(select).toBeDisabled();
          |                      ^
      423 |     });
      424 |
      425 |     it('disables multi-select button when disabled prop is true', () => {

      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:422:22)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Loading State ÔÇ║ disables single-select when loading

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select aria-label="Year" id="filter-Year" />

      455 |
      456 |       const select = screen.getByRole('combobox');
    > 457 |       expect(select).toBeDisabled();
          |                      ^
      458 |     });
      459 |
      460 |     it('disables multi-select button when loading', () => {

      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:457:22)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Loading State ÔÇ║ shows spinner in single-select when loading

    TestingLibraryElementError: Unable to find an element by: [data-testid="spinner"]

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          data-disabled="true"
          data-size="md"
        >
          <label
            for="filter-Year"
          >
            Year
          </label>
          <select
            aria-label="Year"
            id="filter-Year"
          >
            <option
              value=""
            >
              Select...
            </option>
            <option
              value="2023"
            >
              2023
            </option>
            <option
              value="2024"
            >
              2024
            </option>
            <option
              value="2025"
            >
              2025
            </option>
          </select>
        </div>
      </div>
    </body>

      488 |
      489 |       // Check for spinner by test ID
    > 490 |       expect(screen.getByTestId('spinner')).toBeInTheDocument();
          |                     ^
      491 |     });
      492 |
      493 |     it('shows spinner in multi-select button when loading', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByTestId (node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:490:21)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  ÔùÅ GenericFilter ÔÇ║ Accessibility ÔÇ║ has proper ARIA attributes for menu

    expect(element).toHaveAttribute("aria-expanded", "true") // element.getAttribute("aria-expanded") === "true"

    Expected the element to have attribute:
      aria-expanded="true"
    Received:
      aria-expanded="false"

    Ignored nodes: comments, script, style
    <html>
      <head />
      <body>
        <div>
          <div
            data-disabled="false"
            data-size="md"
          >
            <label
              for="filter-Years"
            >
              Years
            </label>
            <div
              data-menu-open="false"
            >
              <button
                aria-expanded="false"
                aria-haspopup="true"
                aria-label="Years"
                font-weight="normal"
                width="100%"
              >
                <span>
                  Select...
                </span>
                <span
                  data-testid="chevron-icon"
                >
                  Ôû╝
                </span>
              </button>
              <div
                role="menu"
              >
                <div
                  aria-checked="false"
                  role="menuitemcheckbox"
                >
                  <div
                    style="display: flex;"
                  >
                    <input
                      aria-hidden="true"
                      pointer-events="none"
                      readonly=""
                      type="checkbox"
                    />
                    <span>
                      2023
                    </span>
                  </div>
                </div>
                <div
                  aria-checked="false"
                  role="menuitemcheckbox"
                >
                  <div
                    style="display: flex;"
                  >
                    <input
                      aria-hidden="true"
                      pointer-events="none"
                      readonly=""
                      type="checkbox"
                    />
                    <span>
                      2024
                    </span>
                  </div>
                </div>
                <div
                  aria-checked="false"
                  role="menuitemcheckbox"
                >
                  <div
                    style="display: flex;"
                  >
                    <input
                      aria-hidden="true"
                      pointer-events="none"
                      readonly=""
                      type="checkbox"
                    />
                    <span>
                      2025
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </body>
    </html>

      682 |
      683 |       await waitFor(() => {
    > 684 |         expect(button).toHaveAttribute('aria-expanded', 'true');
          |                        ^
      685 |       });
      686 |     });
      687 |

      at src/components/filters/GenericFilter.test.tsx:684:24
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:516:19)

  ÔùÅ GenericFilter ÔÇ║ Different Data Types ÔÇ║ handles objects with id property

    TestingLibraryElementError: Value "1" not found in options

    Ignored nodes: comments, script, style
    <select
      aria-label="Objects"
      id="filter-Objects"
    >
      <option
        value=""
      >
        Select...
      </option>
      <option
        value="100"
      >
        Option One
      </option>
      <option
        value="200"
      >
        Option Two
      </option>
      <option
        value="300"
      >
        Option Three
      </option>
    </select>

      826 |
      827 |       const select = screen.getByRole('combobox');
    > 828 |       await user.selectOptions(select, '1');
          |                  ^
      829 |
      830 |       expect(onChange).toHaveBeenCalledWith([objectOptions[0]]);
      831 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:39:39
          at Array.map (<anonymous>)
      at Object.selectOptionsBase (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:31:38)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:18:30)
      at node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:45
      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:28)
      at Object.wrapAsync (node_modules/@testing-library/user-event/dist/cjs/setup/wrapAsync.js:8:28)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:26)
      at Object.<anonymous> (src/components/filters/GenericFilter.test.tsx:828:18)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

Test Suites: 1 failed, 1 total
Tests:       9 failed, 37 passed, 46 total
Snapshots:   0 total
Time:        8.357 s
Ran all test suites matching /GenericFilter.test.tsx/i.
